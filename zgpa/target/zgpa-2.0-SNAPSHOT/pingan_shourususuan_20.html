<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="The Matrix Components Framework">
        <meta name="author" content="LY">
        <title>Matrix</title>
        <link rel="shortcut icon" href="assets/self-owned/ico/favicon.png">
        <link rel="stylesheet" type="text/css" href="assets/reference/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="assets/reference/flat-ui/css/flat-ui.css">
        <link rel="stylesheet" type="text/css" href="assets/reference/font-awesome/css/font-awesome.min.css">
        <link rel="stylesheet" type="text/css" href="assets/self-owned/css/matrix.css">

        <style type="text/css">
            #pinganlogo {
                display: block;
                position: relative;
                margin: auto;
            }
            .input_1{
                font-size:8px;
                width:100%;
                height:22px;
                margin-top:10px
            }
            .input_2{
                font-size:8px;
                width:70%;
                float: left;
                height:22px;
                margin-top:10px
            }

            .label_div{
                padding:0px;              
            }

            .label_span{
                padding-top:10px;
                font-weight: bold;
                font-size: 9px; 
                text-align: left;
            }

            .input_div{
                padding-left:0px;
            }

            .select_1{
                padding:0px;
                font-size: 10px;
                margin-top: 0px;
                height:35px;
                width:100%
            }
        </style>
    </head>

    <body>

        <div class="flat-matrix" style="margin-top:-58px;">
            <div class="app-container" id="contentDiv">
                <div class="row content-container">
                    <!-- 应用左侧NAV导航，可以应用与assist，帮助，过滤等辅助组件，默认自动收缩扩展，支持悬停（点击右上角按钮切换）-->
                    <div class="container" >
                        <div>

                            <div class="row">

                                <!-- logo of the pingan -->
                                <div style="margin-top:58px;">&nbsp;</div>
                                <div>
                                    <img id="pinganlogo" class="img-responsive" src="assets/self-owned/img/pingan1.jpg" alt="" style="width:50%;">
                                </div>
                                <!-- title: such lik kaimenhong -->
                                <div class="col-xs-10 col-xs-offset-1 text-center">
                                    <a name="total-income"></a>
                                    <span style="font-size:38px;color:#FB9E13">营销收入测算</span>
                                </div>

                                <!-- button group of main function -->
                                <div class="col-xs-10 col-xs-offset-1 text-center">
                                    <div class="card card-danger">
                                        <div class="card-body no-padding">
                                            <form class="form-horizontal">
                                                <div class="form-group" style="">

                                                    <div class="col-xs-3 col-xs-offset-1 label_div">
                                                        <label class=" control-label">
                                                            <span>代码</span>
                                                        </label>

                                                        <p class="form-control-static" data-bind="text:code" style="font-size: 11px;">No 1</p>

                                                    </div>
                                                    <div class="col-xs-3 label_div" >
                                                        <label class="control-label">
                                                            <span>姓名</span>
                                                        </label>

                                                        <p class="form-control-static" data-bind="text:name" style="font-size: 11px;">张三</p>

                                                    </div>
                                                    <div class="col-xs-4 label_div">
                                                        <label class=" control-label">
                                                            <span>职级</span>
                                                        </label>
                                                        <div align="center">
                                                            <select  class="form-control select_1"  data-bind="options:level_array,value:level"></select>
                                                        </div> 
                                                    </div>
                                                </div>
                                                <div class="form-group label_div" >
                                                    <label class="col-xs-6 control-label">
                                                        <span>收入合计:&nbsp;<span style="color:red;font-size:15px" data-bind="text:total_income"></span>万元</span>
                                                    </label>

                                                    <label class="col-xs-6 control-label text-center label_div">
                                                        <span style="font-weight: normal;font-size: 11px;">其它收入占比: &nbsp;
                                                            <input class="input_1" style="margin-top: 10px; width:20px;height:20px" data-bind="value:other_income_percent"/> % 
                                                        </span>
                                                    </label>

                                                </div>
                                            </form>
                                        </div>
                                        <div class="alert alert-danger fresh-color">
                                            <span>备注: 其他收入包含以下收入以外的续保、综拓等收入，请依据个人实际情况进行比例调整</span>
                                        </div>
                                    </div>
                                    <!-- <div class="form-group label_div">
                                      <label class="col-xs-3 control-label label_span">
                                        <span></span>
                                      </label>
                                      <div class="col-xs-6">
                    
                                      </div>
                                    </div> -->
                                    <div class="card card-danger" data-bind="if:person">
                                        <div class="card-header" style="height:50px">
                                            <div class="card-title" style="padding: 8px 20px;">
                                                <div class="title"><i class="fa fa-child"></i> 个人情况:
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body no-padding" data-bind="with:person">
                                            <br>
                                            <form class="form-horizontal">
                                                <div class="form-group label_div">
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>个人增员:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" data-bind="value:increasing_num"/>
                                                    </div>
                                                </div>
                                                <!-- ko foreach: insurances -->
                                                <div class="form-group label_div">
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span data-bind="visible:($index()==$parent.insurances().length-1)">
                                                            <a data-bind="click: $parent.addInsurance"><i class="fa fa-plus"></i></a>
                                                        </span>
                                                        <span data-bind="visible:!($index()==$parent.insurances().length-1)">
                                                            <a data-bind="click: $parent.removeInsurance"><i class="fa fa-remove"></i></a>
                                                        </span>
                                                        <span>产品保费:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" data-bind="value:insurance_cost"/>
                                                    </div>
                                                    <!--                                                    <label class="col-xs-6 control-label text-center label_div label_span">
                                                                                                            <span>佣金率: 
                                                                                                                <input class="input_1"  data-bind="value:commission"/> % 
                                                                                                            </span>
                                                                                                        </label>-->
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>佣金率:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <span>
                                                            <input class="input_2" data-bind="value:commission">
                                                            <label class="control-label label_span">
                                                                <span>%</span>
                                                            </label>
                                                        </span>
                                                    </div>
                                                </div>
                                                <!-- /ko -->
                                                <div class="form-group label_div">
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>初佣:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" disabled="true" style="margin-top: 5px;" data-bind="value:initial_commission"/>
                                                    </div>
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>训练津贴:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" disabled="true" style="margin-top: 5px;" data-bind="value:tainning_allowance"/>
                                                    </div>
                                                </div>
                                                <div class="form-group label_div">
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>业绩津贴:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" disabled="true" style="margin-top: 5px;" data-bind="value:achievement_allowance"/>
                                                    </div>
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>增员奖:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" disabled="true" style="margin-top: 5px;" data-bind="value:increasing_num_bonus"/>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="card card-danger" data-bind="if:group">
                                        <div class="card-header" style="height:50px">
                                            <div class="card-title" style="padding: 8px 20px;">
                                                <div class="title"><i class="fa fa-bank"></i> 组情况:
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body no-padding" data-bind="with:group">
                                            <br>
                                            <form class="form-horizontal">
                                                <div class="form-group label_div">
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>团队人力:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" data-bind="value:human_resource"/>
                                                    </div>
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>人均业绩:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" data-bind="value:per_capita_achievement"/>
                                                    </div>
                                                </div>
                                                <div class="form-group label_div">
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>管理津贴:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" disabled="true" style="margin-top: 5px;" data-bind="value:manage_allowance"/>
                                                    </div>
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>育成利益:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" disabled="true" style="margin-top: 5px;" data-bind="value:budget"/>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="card card-danger" data-bind="if:part">
                                        <div class="card-header" style="height:50px">
                                            <div class="card-title" style="padding: 8px 20px;">
                                                <div class="title"><i class="fa fa-bank"></i> 部情况:
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body no-padding" data-bind="with:part">
                                            <br>
                                            <form class="form-horizontal">
                                                <div class="form-group label_div">
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>团队人力:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" data-bind="value:human_resource"/>
                                                    </div>
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>人均保费:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" data-bind="value:per_capita_achievement"/>
                                                    </div>
                                                </div>
                                                <div class="form-group label_div">
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>管理津贴:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" disabled="true" style="margin-top: 5px;" data-bind="value:manage_allowance"/>
                                                    </div>
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>增部利益:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" disabled="true" style="margin-top: 5px;" data-bind="value:budget"/>
                                                    </div>
                                                </div>
                                                <div class="form-group label_div">
                                                    <label class="col-xs-3 control-label label_span">
                                                        <span>总盈利益:</span>
                                                    </label>
                                                    <div class="col-xs-3">
                                                        <input class="input_1" disabled="true" style="margin-top: 5px;" data-bind="value:total_budget"/>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-10 col-xs-offset-1 text-center">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <div class="col-xs-12 text-center">
                                                <a class="btn btn-danger  btn-wide text-center" href="#total-income" style="width:180px" onclick="run()" >提交</a>
                                            </div>
                                        </div>
                                    </form>
                                    <div class="" style="color:#888;font-size:11px">
                                        <span>本操作仅为测算结果，实际收入以系统数据为准</span>
                                    </div>
                                </div>




                            </div>

                        </div>

                    </div>
                </div>

            </div>
        </div>



        <!-- /.container -->


        <script src="assets/reference/jquery/jquery-1.11.1.min.js"></script>
        <script src="assets/reference/jquery/jquery.json.js"></script>
        <script src="assets/reference/jquery-ui/jquery-ui.js" type="text/javascript"></script>
        <script src="assets/reference/knockout.js/knockout-3.3.0.js"></script>
        <script src="assets/reference/jquery-tiny-pubsub/tiny-pubsub.js"></script>
        <script src="assets/reference/flat-ui/js/vendor/video.js"></script>
        <script src="assets/reference/flat-ui/js/flat-ui.min.js"></script>
        <script src="assets/reference/flat-ui/docs/assets/js/prettify.js"></script>
        <script src="assets/reference/flat-ui/docs/assets/js/application.js"></script>
        <!-- Javascript for Matrix Self Owned -->
        <script src="assets/self-owned/js/generic/generic_algorithm.js"></script>
        <script src="assets/self-owned/js/generic/generic_cache.js"></script>
        <script src="assets/self-owned/js/generic/generic_charting.js"></script>
        <script src="assets/self-owned/js/generic/generic_csv.js"></script>
        <script src="assets/self-owned/js/generic/generic_cud.js"></script>
        <script src="assets/self-owned/js/generic/generic_modal.js"></script>
        <script src="assets/self-owned/js/generic/generic_prototype.js"></script>
        <script src="assets/self-owned/js/generic/generic_query.js"></script>
        <script src="assets/self-owned/js/generic/generic_table.js"></script>
        <script src="assets/self-owned/js/generic/generic_util.js"></script>
        <script src="assets/self-owned/js/generic/generic_validation.js"></script>
        <script src="assets/self-owned/js/yingxiao_view_model.js"></script>

        <script>
                                                    var yingXiaoViewModel = new YingXiaoViewModel();
                                                    $(document).ready(function () {
                                                        ko.applyBindings(yingXiaoViewModel, document.getElementById('contentDiv'));
                                                    });
                                                    var run = function () {
                                                        var income = 0;
                                                        //初佣
                                                        income += yingXiaoViewModel.person.initial_commission();
                                                        //训练津贴
                                                        income += yingXiaoViewModel.person.tainning_allowance();
                                                        //业绩津贴
                                                        income += yingXiaoViewModel.person.achievement_allowance();
                                                        //增员奖
                                                        income += yingXiaoViewModel.person.increasing_num_bonus();
                                                        //管理津贴
                                                        income += yingXiaoViewModel.group.manage_allowance();
                                                        //育成利益
                                                        income += yingXiaoViewModel.group.budget();
                                                        //管理津贴
                                                        income += yingXiaoViewModel.part.manage_allowance();
                                                        //增部利益
                                                        income += yingXiaoViewModel.part.budget();
                                                        //总盈利益
                                                        income += yingXiaoViewModel.part.total_budget();

                                                        //总收益万元小数点两位
                                                        income = income / (100 * (100 - yingXiaoViewModel.other_income_percent()));
                                                        income = income + "";
                                                        if (income.indexOf(".") > 0) {
                                                            income = income.substring(0, income.indexOf(".") + 3);
                                                        }
                                                        yingXiaoViewModel.total_income(new Number(income));
                                                    }
                                                    var compute_initial_commission = function () {
                                                        var result = 0;
                                                        $.each(yingXiaoViewModel.person.insurances(), function (key, val) {
                                                            result += val.insurance_cost() * val.commission() / 100;
                                                        })
                                                        yingXiaoViewModel.person.initial_commission(result);
                                                    }
        </script>
    </body>

</html>
